#pragma checksum "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b530bd825d3bdb823b30d3ef522cf1f04ded410d"
// <auto-generated/>
#pragma warning disable 1591
namespace BlazorServer.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Authorization;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using BlazorServer;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using BlazorServer.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using Core.Session;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\_Imports.razor"
using BlazorTable;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
using Core;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
using Microsoft.AspNetCore.Html;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
using System.Threading;

#line default
#line hidden
#nullable disable
#nullable restore
#line 11 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
using SharedLib;

#line default
#line hidden
#nullable disable
#nullable restore
#line 12 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
using Game;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/FrameConfiguration")]
    public partial class FrameConfiguration : Microsoft.AspNetCore.Components.ComponentBase, IDisposable
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<style>\r\n    h5 {\r\n        margin-top: 20px\r\n    }\r\n</style>\r\n\r\n");
#nullable restore
#line 20 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
 if (saved)
{

#line default
#line hidden
#nullable disable
            __builder.AddContent(1, "    ");
            __builder.AddMarkupContent(2, "<h1>Saved! - Please wait until restart! And press <b>Reload</b> when it prompts!</h1>\r\n");
            __builder.AddContent(3, "    ");
            __builder.OpenElement(4, "span");
            __builder.AddAttribute(5, "class", "row col-md-12");
            __builder.AddContent(6, 
#nullable restore
#line 24 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                 playerClass

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(7, "\r\n");
#nullable restore
#line 25 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
}
else
{
    if (DataFrameConfiguration.Exists())
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(8, "        ");
            __builder.AddMarkupContent(9, "<h1>Frame Configuration file already exists</h1>\r\n");
#nullable restore
#line 31 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(10, "        ");
            __builder.AddMarkupContent(11, "<h1>Frame configuration not found !</h1>\r\n");
#nullable restore
#line 35 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }

    

#line default
#line hidden
#nullable disable
#nullable restore
#line 37 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
     if (addonNotVisible)
    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(12, "        <hr>\r\n        ");
            __builder.OpenElement(13, "div");
            __builder.AddAttribute(14, "class", "row col-md-12");
            __builder.AddMarkupContent(15, "\r\n            ");
            __builder.OpenElement(16, "span");
            __builder.AddAttribute(17, "class", "row col-md-12");
            __builder.AddContent(18, "I saw ");
            __builder.AddContent(19, 
#nullable restore
#line 41 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                               dataFrames.Count

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(20, " data frames. But its keep changing! The addon is not visible.");
            __builder.CloseElement();
            __builder.AddMarkupContent(21, "\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(22, "\r\n        ");
            __builder.AddMarkupContent(23, "<div class=\"row col-md-12\">\r\n            <p class=\"h3 text-danger\">Restart the game</p>\r\n        </div>\r\n        ");
            __builder.AddMarkupContent(24, "<div class=\"row col-md-12\">\r\n            <p class=\"h3 text-danger\">Enable the addon</p>\r\n        </div>\r\n        ");
            __builder.AddMarkupContent(25, "<div class=\"row col-md-12\">\r\n            <p class=\"h3 text-danger\">Make sure nothing obstruct</p>\r\n        </div>\r\n");
#nullable restore
#line 52 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(26, "    <hr>\r\n    ");
            __builder.AddMarkupContent(27, "<h5 class=\"row col-md-12\">Your screen:</h5>\r\n");
#nullable restore
#line 56 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
     if (@dataFrames.Count == dataFrameMeta.frames)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(28, "        ");
            __builder.OpenElement(29, "span");
            __builder.AddAttribute(30, "class", "row col-md-12");
            __builder.AddContent(31, "I see ");
            __builder.AddContent(32, 
#nullable restore
#line 58 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                           dataFrames.Count

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(33, " data frames. This is perfect, just click the Save button.");
            __builder.CloseElement();
            __builder.AddMarkupContent(34, "\r\n");
#nullable restore
#line 59 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }
    else
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(35, "        ");
            __builder.OpenElement(36, "span");
            __builder.AddAttribute(37, "class", "row col-md-12");
            __builder.AddContent(38, "I see ");
            __builder.AddContent(39, 
#nullable restore
#line 62 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                           dataFrames.Count

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(40, " data frames. I should see ");
            __builder.AddContent(41, 
#nullable restore
#line 62 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                       dataFrameMeta.frames

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(42, " if you have typed ");
            __builder.OpenElement(43, "span");
            __builder.AddAttribute(44, "class", "ml-1");
            __builder.OpenElement(45, "b");
            __builder.AddContent(46, "/");
            __builder.AddContent(47, 
#nullable restore
#line 62 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                                                                                          addonConfig?.Command

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(48, "\r\n");
#nullable restore
#line 63 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.AddContent(49, "    ");
            __builder.OpenElement(50, "div");
            __builder.AddAttribute(51, "class", "row col-md-12");
            __builder.AddMarkupContent(52, "\r\n");
#nullable restore
#line 66 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
         if (@dataFrames.Count != dataFrameMeta.frames)
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(53, "            ");
            __builder.OpenElement(54, "img");
            __builder.AddAttribute(55, "style", "border:1px solid red; margin: 5px");
            __builder.AddAttribute(56, "src", "data:image/png;base64," + " " + (
#nullable restore
#line 68 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                        image

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(57, "alt", "Red dot");
            __builder.CloseElement();
            __builder.AddMarkupContent(58, "\r\n");
#nullable restore
#line 69 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
        }
        else
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(59, "            ");
            __builder.OpenElement(60, "img");
            __builder.AddAttribute(61, "style", "border:1px solid green; margin: 5px");
            __builder.AddAttribute(62, "src", "data:image/png;base64," + " " + (
#nullable restore
#line 72 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                          image

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(63, "alt", "Red dot");
            __builder.CloseElement();
            __builder.AddMarkupContent(64, "\r\n");
#nullable restore
#line 73 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(65, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(66, "\r\n");
            __builder.AddContent(67, "    ");
            __builder.OpenElement(68, "span");
            __builder.AddAttribute(69, "class", "row col-md-12");
            __builder.AddContent(70, 
#nullable restore
#line 76 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                 playerClass

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(71, "\r\n");
#nullable restore
#line 78 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
     if (DataFrameConfiguration.Exists())
    {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(72, "        <hr>\r\n        ");
            __builder.AddMarkupContent(73, "<h4 class=\"text-warning\">Tinkering with the following fields are not recommend! Unless experinecing strange behaviours then repeat the Frame Configuration process!</h4>\r\n");
#nullable restore
#line 82 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(74, "    <hr>\r\n    ");
            __builder.AddMarkupContent(75, "<h4 class=\"row col-md-12\"><b>Auto config</b>: It will automatically setup the necessary stuffs.</h4>\r\n    <hr>\r\n");
            __builder.AddContent(76, "    ");
            __builder.OpenElement(77, "button");
            __builder.AddAttribute(78, "class", "row col-md-1 btn btn-sm btn-success");
            __builder.AddAttribute(79, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 88 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                  AutoConfigure

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(80, "\r\n        ");
            __builder.AddMarkupContent(81, "<span>Auto Configure and Restart</span>\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(82, "\r\n");
            __builder.AddMarkupContent(83, "    <hr>\r\n    ");
            __builder.AddMarkupContent(84, "<h4 class=\"row col-md-12\"><b>Manually:</b></h4>\r\n    ");
            __builder.OpenElement(85, "h5");
            __builder.AddAttribute(86, "class", "row col-md-12");
            __builder.AddContent(87, "Step 1: Please ensure the addon ");
            __builder.OpenElement(88, "span");
            __builder.AddAttribute(89, "class", "px-2");
            __builder.OpenElement(90, "b");
            __builder.AddContent(91, 
#nullable restore
#line 94 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                     addonConfig?.Title

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddContent(92, " found in the addon folders is running. You should see the multi-coloured pixels at the top left of the screen.");
            __builder.CloseElement();
            __builder.AddMarkupContent(93, "\r\n");
            __builder.AddContent(94, "    ");
            __builder.OpenElement(95, "div");
            __builder.AddAttribute(96, "class", "row col-md-12");
            __builder.AddMarkupContent(97, "\r\n");
#nullable restore
#line 97 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
         if (dataFrames.Count != dataFrameMeta.frames)
        {

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(98, "            <img src=\"Addon_Normal.png\">\r\n");
#nullable restore
#line 100 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddContent(99, "    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(100, "\r\n");
            __builder.AddContent(101, "    ");
            __builder.OpenElement(102, "h5");
            __builder.AddAttribute(103, "class", "row col-md-12");
            __builder.AddContent(104, "Step 2: Now we are going to put the addon into configuration mode, this will change the addon colours displayed. In the wow chat window: type ");
            __builder.OpenElement(105, "span");
            __builder.AddAttribute(106, "class", "ml-1");
            __builder.OpenElement(107, "b");
            __builder.AddContent(108, "/");
            __builder.AddContent(109, 
#nullable restore
#line 103 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                                                                                                                                        addonConfig?.Command

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(110, "\r\n");
#nullable restore
#line 105 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
     if (dataFrames.Count != dataFrameMeta.frames)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(111, "        ");
            __builder.AddMarkupContent(112, "<div class=\"row col-md-12\" style=\"margin-top:10px\">\r\n            <img src=\"Addon_Config.png\">\r\n        </div>\r\n");
#nullable restore
#line 110 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
    }

#line default
#line hidden
#nullable disable
            __builder.AddContent(113, "    ");
            __builder.OpenElement(114, "h5");
            __builder.AddAttribute(115, "class", "row col-md-12");
            __builder.AddContent(116, "Step 3: I see ");
            __builder.AddContent(117, 
#nullable restore
#line 112 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                             dataFrames.Count

#line default
#line hidden
#nullable disable
            );
            __builder.AddContent(118, " data frames. Should see ");
            __builder.AddContent(119, 
#nullable restore
#line 112 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                       dataFrameMeta.frames

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(120, "\r\n");
#nullable restore
#line 114 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
     if (dataFrameMeta.frames != 0 && dataFrames.Count == dataFrameMeta.frames)
    {

#line default
#line hidden
#nullable disable
            __builder.AddContent(121, "        ");
            __builder.OpenElement(122, "h5");
            __builder.AddAttribute(123, "class", "row col-md-12");
            __builder.AddContent(124, "Step 4: Now return to normal mode, In the wow chat window: type ");
            __builder.OpenElement(125, "span");
            __builder.AddAttribute(126, "class", "ml-1");
            __builder.OpenElement(127, "b");
            __builder.AddContent(128, "/");
            __builder.AddContent(129, 
#nullable restore
#line 116 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                                                                              addonConfig?.Command

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.CloseElement();
            __builder.AddMarkupContent(130, "\r\n");
#nullable restore
#line 118 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
         if (!playerClass.ToLower().Contains("unable to read player class"))
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(131, "            ");
            __builder.AddMarkupContent(132, "<h5 class=\"row col-md-12\">Step 5:  Click Save</h5>\r\n            ");
            __builder.OpenElement(133, "button");
            __builder.AddAttribute(134, "class", "row col-md-1 btn btn-sm btn-primary");
            __builder.AddAttribute(135, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 121 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
                                                                          Configure

#line default
#line hidden
#nullable disable
            ));
            __builder.AddMarkupContent(136, "\r\n                ");
            __builder.AddMarkupContent(137, "<span>Save</span>\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(138, "\r\n");
#nullable restore
#line 124 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
        }

#line default
#line hidden
#nullable disable
#nullable restore
#line 124 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
         
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 125 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
     
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
#nullable restore
#line 127 "C:\Users\hopki\OneDrive\Documents\Myaddon\Wickedaddon\WowClassicGrindBot\BlazorServer\Pages\FrameConfiguration.razor"
       

    private AddonConfig addonConfig = AddonConfig.Load();
    private AddonConfigurator? addonConfigurator;

    private DataConfig? dataConfig;
    private Core.Database.AreaDB? areaDb;
    private DataFrameMeta dataFrameMeta = DataFrameMeta.Empty;
    private DataFrameConfiguration? config;
    private List<DataFrame> dataFrames = new List<DataFrame>();
    private IAddonDataProvider? addonDataProvider;
    private AddonReader? addonReader;

    private WowProcess? wowProcess;
    private WowScreen? wowScreen;
    private WowProcessInput? WowProcessInput;

    private bool saved = false;
    private string playerClass = "";
    private bool addonNotVisible = false;

    string image = "iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==";

    private Thread? screenshotThread;
    private const int interval = 1000;
    private int counter = 0;
    private CancellationTokenSource? cancellationTokenSource;

    protected override void OnInitialized()
    {
        if (config == null)
        {
            wowProcess = new WowProcess();
            wowScreen = new WowScreen(logger, wowProcess);
            WowProcessInput = new WowProcessInput(logger, wowProcess);
            config = new DataFrameConfiguration(wowScreen);
            dataConfig = DataConfig.Load();

            areaDb = new Core.Database.AreaDB(logger, dataConfig);

            addonConfigurator = new AddonConfigurator(logger, addonConfig);

            if (DataFrameConfiguration.Exists())
            {
                dataFrames = DataFrameConfiguration.LoadFrames();
                dataFrameMeta = DataFrameConfiguration.LoadMeta();

                addonDataProvider = new AddonDataProvider(wowScreen, dataFrames);
            }

            cancellationTokenSource = new CancellationTokenSource();
            screenshotThread = new System.Threading.Thread(ScreenshotRefreshThread);
            screenshotThread.Start();
        }
    }

    public void Dispose()
    {
        cancellationTokenSource?.Cancel();
    }

    private DataFrameMeta GetDataFrameMeta()
    {
        if (config == null) return DataFrameMeta.Empty;

        var screenshot = wowScreen?.GetBitmap(5, 5);
        if (screenshot == null) return DataFrameMeta.Empty;

        var meta = DataFrameConfiguration.GetMeta(screenshot);
        return meta;
    }

    private void ScreenshotRefreshThread()
    {
        while (cancellationTokenSource != null && !cancellationTokenSource.Token.IsCancellationRequested)
        {
            if (wowProcess != null && wowScreen != null && config != null && dataConfig != null && areaDb != null)
            {
                if (dataFrameMeta == DataFrameMeta.Empty)
                {
                    addonNotVisible = false;
                    dataFrameMeta = GetDataFrameMeta();

                    InvokeAsync(() =>
                    {
                        base.StateHasChanged();
                    });
                }
                else
                {
                    var temp = GetDataFrameMeta();
                    if (temp != DataFrameMeta.Empty && temp.rows != dataFrameMeta.rows)
                    {
                        addonNotVisible = true;
                        dataFrameMeta = DataFrameMeta.Empty;

                        InvokeAsync(() =>
                        {
                            base.StateHasChanged();
                        });
                    }
                }

                if (dataFrameMeta != DataFrameMeta.Empty)
                {
                    var size = dataFrameMeta.EstimatedSize();
                    wowScreen.GetRectangle(out var rect);

                    if (size.Width < rect.Size.Width &&
                        size.Height < rect.Size.Height && !size.IsEmpty)
                    {
                        var screenshot = wowScreen.GetBitmap(size.Width, size.Height);
                        if (screenshot != null)
                        {
                            using (System.IO.MemoryStream ms = new System.IO.MemoryStream())
                            {
                                screenshot.Save(ms, System.Drawing.Imaging.ImageFormat.Jpeg);
                                byte[] byteImage = ms.ToArray();
                                this.image = Convert.ToBase64String(byteImage); // Get Base64

                                if (dataFrameMeta == DataFrameMeta.Empty)
                                {
                                    dataFrameMeta = DataFrameConfiguration.GetMeta(screenshot);
                                }

                                //if(dataFrames.Count == 0)
                                if (dataFrames.Count != dataFrameMeta.frames)
                                {
                                    dataFrames = DataFrameConfiguration.CreateFrames(dataFrameMeta, screenshot);
                                }

                                if (dataFrames.Count == dataFrameMeta.frames)
                                {
                                    if (addonReader != null)
                                    {
                                        addonReader.Dispose();
                                        addonDataProvider = null;
                                    }

                                    if (addonDataProvider == null)
                                    {
                                        addonDataProvider = new AddonDataProvider(wowScreen, dataFrames);
                                    }

                                    addonReader = new AddonReader(logger, dataConfig, areaDb, addonDataProvider);
                                }

                                if (addonReader != null) // && dataFrames.Count != dataFrameMeta.frames
                                {
                                    ResolveClass(addonReader);
                                }

                                InvokeAsync(() =>
                                {
                                    base.StateHasChanged();
                                });
                            }
                        }
                    }
                    else
                    {
                        addonNotVisible = true;
                        dataFrameMeta = DataFrameMeta.Empty;

                        InvokeAsync(() =>
                        {
                            base.StateHasChanged();
                        });
                    }
                }
            }

            System.Threading.Thread.Sleep(interval);
            Interlocked.Increment(ref counter);
        }
    }

    private async Task Configure()
    {
        if (wowScreen == null) return;
        if (config == null) return;

        var version = addonConfigurator?.GetInstalledVersion();
        if (version == null) return;

        if (dataFrames.Count != dataFrameMeta.frames)
        {
            return;
        }

        wowScreen.GetRectangle(out var rect);

        DataFrameConfiguration.SaveConfiguration(rect, version, dataFrameMeta, dataFrames);
        saved = true;

        await InvokeAsync(() =>
        {
            base.StateHasChanged();
        });

        await Wait();

        await RestartServer();
    }

    private async Task AutoConfigure()
    {
        if (config == null) return;

        var version = addonConfigurator?.GetInstalledVersion();
        if (version == null) return;

        var meta = GetDataFrameMeta();
        if (meta == DataFrameMeta.Empty || meta.hash == 0)
        {
            await ToggleInGameConfiguration();
            await Wait();
        }

        meta = GetDataFrameMeta();

        var size = meta.EstimatedSize();
        var screenshot = wowScreen?.GetBitmap(size.Width, size.Height);
        if (screenshot == null) return;

        var dataFrames = DataFrameConfiguration.CreateFrames(meta, screenshot);

        if (dataFrames.Count != meta.frames)
        {
            return;
        }

        await Wait();

        await ToggleInGameConfiguration();

        if (addonReader != null && !ResolveClass(addonReader))
        {
            return;
        }

        await Wait();

        if (wowScreen == null) return;
        wowScreen.GetRectangle(out var rect);
        DataFrameConfiguration.SaveConfiguration(rect, version, meta, dataFrames);
        saved = true;

        await InvokeAsync(() =>
        {
            base.StateHasChanged();
        });

        await Wait();

        await RestartServer();
    }

    private async Task ToggleInGameConfiguration()
    {
        if (WowProcessInput != null)
        {
            WowProcessInput.SetForegroundWindow();
            await WowProcessInput.KeyPress(ConsoleKey.Enter, 200);
            WowProcessInput.SetForegroundWindow();
            await WowProcessInput.SendText("/" + addonConfig?.Command);
            WowProcessInput.SetForegroundWindow();
            await WowProcessInput.KeyPress(ConsoleKey.Enter, 200);
        }
    }

    private async Task RestartServer()
    {
        cancellationTokenSource?.Cancel();

        this.botController.Shutdown();
        await Task.Delay(1000);
        NavigationManager.NavigateTo("/");
        lifetime.StopApplication();
    }

    private bool ResolveClass(AddonReader addonReader)
    {
        addonReader.Refresh();
        if (Enum.GetValues(typeof(PlayerClassEnum)).Cast<PlayerClassEnum>().Contains(addonReader.PlayerReader.PlayerClass))
        {
            playerClass = "The class of the character is: " + addonReader.PlayerReader.PlayerClass.ToString();
            return true;
        }
        else
        {
            playerClass = "Still unable to read player class";
        }

        return false;
    }

    private async Task Wait()
    {
        var temp = counter;
        do
        {
            await Task.Delay(100);
        } while (temp == counter);
    }

#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Core.IBotController botController { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private NavigationManager NavigationManager { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Microsoft.Extensions.Hosting.IHostApplicationLifetime lifetime { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private Microsoft.Extensions.Logging.ILogger logger { get; set; }
    }
}
#pragma warning restore 1591
